<link rel="import" href="../bower_components/polymer/polymer.html">
<polymer-element name="labeli-events-section">
	<template>
		<style>
			:host
			{
				display : block;
				max-width: 1000px;
				margin : auto;
			}
			labeli-event
			{
				opacity : 0;
				position : relative;
				top : -15px;
			}
			h1
			{
				font-family : Convergence, sans-serif;
				margin-left : 15px;
			}
			core-icon.big
			{
				width : 32px;
				height : 32px;
				position : relative;
				top : -2px;
				margin-right : 5px;
				
			}
		</style>
		
		<h1><core-icon icon="event" class="big"></core-icon>Évènements récents</h1>
		<div id="events" layout horizontal wrap></div>
	</template>
	
	<script>
		Polymer({
			publish :
			{
				count : -1,
			},
			events : [],
			domReady : function()
			{
				var root = this;
				labeli.async.getEvents(function(events)
				{
					root.events = (root.count == -1) ? events : events.slice(0, root.count);
				});
			},
			eventsChanged : function()
			{
				for(var i = 0; i < this.events.length; ++i)
				{
					var element = document.createElement("labeli-event");
					element.event = this.events[i];
					this.$.events.appendChild(element);
					$(element).delay(i * 150).animate({opacity : 1, top : 0}, 250);
				}
			}
		});
	</script>
</polymer-element>